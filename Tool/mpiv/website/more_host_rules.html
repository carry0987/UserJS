<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>MPIV Host Rules Repository</title>
		<style>
			body { background:#eee; font-size:12px; font-family:sans-serif; padding:0; margin:0; }
			body.framed { overflow:hidden; }
			code { font-size:11px; }
			td { padding:4px; }
			button { margin-left:8px; }
			select { border:1px solid #808080; padding:2px; }
		</style>
		<script>
			var rules = [{"d":"0xxx","r":"0img\\.net\/\\?v=","s":"\/\\?v=\/images\/\/","name":"0xxx"},{"r":"10pix\\.ru\/view.*","q":"#image","name":"10pix"},{"r":"(www\\.8muses\\.com\/_data\/.+)cu_e[0-9x]+(.+)","s":"http:\/\/$1me$2","name":"8muses (old template)"},{"d":"addons.mozilla.org","e":".addon .summary img, .addon .info h3 img, .addon .icon img","g":{"entry":"#preview.slider li","image":"a"},"s":"for(var a=node; a && (a.tagName!='A'); a=a.parentNode){}; return a ? a.href : false","name":"addons.mozilla.org (icons\/thumbnails in list, gallery mode)"},{"d":"adultddl","r":"secure\\.adultddl\\.ws\/\\?l=","follow":true,"name":"AdultDDL"},{"r":"afisha\\.ru\/.*\/photo","q":"#ctl00_CenterPlaceHolder_ucPhotoPageContent_imgBigPhoto","name":"Afisha"},{"d":"ideas.aha.io","r":"\/\/.+?\/attachments\/","s":"var item=node.closest('.attachment'); return item.closest('.attachments').querySelector('.item[class*=\"' + item.dataset.attachmentId + '\"] img').src","name":"Aha!"},{"d":"aliexpress.com","e":".osp a.item-img","q":"return (e=doc.querySelector('#img img'))?e.src.replace(\/(\\.jpg)_.+?\\.jpg.*\/,'$1'):false","name":"AliExpress (mini thumbnails)"},{"d":"aliexpress.com","r":"(.+?\\.jpg)_.+?\\.jpg.*","s":"$1","name":"AliExpress (thumbnails"},{"r":"all-poster\\.ru","q":"img","name":"All Poster"},{"d":"wall.alphacoders.com","r":"(\/\/images.+?\/)thumb-\\d+-(.+)","s":"p=node.closest('.thumb-container'); return !p ? m[1]+m[2] : p.innerHTML.replace(\/^[\\s\\S]*data-href.*?(\\\/\\\/.+?\\\/download\\\/.*?)\"[\\s\\S]*\/, '$1')","name":"Alpha Coders (Wall)"},{"r":"fs(\\d+)\\.androidpit\\.info\/user\/(x\\d+)\/(\\d+)-65x70(.+)","s":"http:\/\/fs$1.androidpit.info\/user\/$2\/$3-130x140$4","name":"AndroidPIT avatars"},{"r":"http:\\\/\\\/www.androidtapp.com\\\/wp-content\\\/uploads\\\/(\\d{4}\\\/\\d{2}\\\/.+)-120x200\\.(png|jpg)","s":"http:\/\/www.androidtapp.com\/wp-content\/uploads\/$1.$2","name":"AndroidTapp"},{"d":"archdaily.com","e":"a,img,.nr-image","html":true,"r":"(\/\/images\\.adsttc\\.com\/media\/images\/.+?\/)(newsletter|slideshow|thumb_jpg|small_jpg|medium_jpg|large_jpg)(\/.+?)(\\.\\w+)","s":["$1original$3$4","$1large_jpg$3$4"],"name":"archdaily"},{"r":"archive.moe\/[a-z0-9]+\/redirect\/","q":"return text.match(\/url=([^\"]+)\/)[1];","name":"archive.moe (redirects)"},{"r":"(hiphotos|imgsrc)\\.baidu\\.com\/(.+?)\/.+?([0-9a-f]{40})","s":"http:\/\/$1.baidu.com\/$2\/pic\/item\/$3.jpg","name":"Baidu Tieba"},{"d":"bandcamp.com","r":"bcbits\\.com\/img\/.+?_(42|7)","s":"return node.src.replace('_42.','_20.').replace('_7.','_10.')","c":"return node.alt.replace(' thumbnail','')","css":".tooltip, .collected-by .deets .pic > .tooltip {visibility:hidden;opacity:0}","name":"Bandcamp"},{"r":"bayimg.com\/\\w+$","q":"#mainImage","name":"BAYIMG"},{"d":"behance.net","e":".cover-img-link","r":"\/gallery\/\\d+\/.+","g":"g=[]; if(m=text.match(\/<meta property=\"og:title\" content=\"(.+?)\\s*\"\/)) g.title=m[1]; if(m=text.match(\/#primary-project-content[^}]+?background-image:.+?(https.+?)[')]\/)) g.push({url:m[1]}); r=\/<img[^>]+?src=\"(https:..m\\d+\\.behance.+?\\\/modules\\\/\\d+\\\/).+?(\\\/.+?)[\"?]\/g; while(m=r.exec(text)) g.push({url:[m[1]+'orig'+m[2],m[1]+'hd'+m[2],m[1]+'disp'+m[2]]}); return g","name":"Behance (project thumbnail in Activity\/Discover, gallery mode)"},{"d":"behance.net","r":"(m\\d+.+?modules\/\\d+\/).+?(\/.+?)(\\?|$)","s":["http:\/\/$1orig$2","http:\/\/$1hd$2","http:\/\/$1disp$2"],"name":"Behance (single images)"},{"r":"bharatstudent\\.com","s":"\/thumb\/normal\/","name":"bharatstudent.com"},{"r":"imgurl:&quot;(.+?)&quot;","s":"$1","html":true,"name":"Bing Images"},{"d":"blu-ray.com","r":"(\/\/images.+?\/\\d+_\\d+)(\\.jpg)","s":["$1_1080p$2","$1_large$2"],"name":"Blu-ray.com"},{"d":"booru.io","r":"\/p\/(.*)","s":"var req = new XMLHttpRequest(); req.open('GET', '\/api\/entity\/' + m[1], false); req.send(null); var data = JSON.parse(req.responseText); return 'https:\/\/booru.io\/data\/' + data.transforms[''];","name":"Booru.io"},{"d":"bugzilla.mozilla.org","r":"attachment.+?id=\\d+","s":"return 'https:\/\/bug' + new URLSearchParams(location.search).get('id') + '.bmoattachments.org\/' + m[0]","rect":"td","name":"Bugzilla attachments"},{"r":"([a-z]+.files.wordpress.com\/[^\\?]+)\\?","s":"http:\/\/$1","name":"BustedCoverage\/CoedMagazine\/CollegeCandy\/TheChive"},{"d":"cairozoom.com","e":"li > img + div","s":"return node.previousElementSibling.src.replace('\/ThumbnailImages', '\/Original(NoWaterMark)')","name":"CairoZoom"},{"r":"(.+?celebuzz\\.com\/.+?)(post|gallery)_[a-z]+\/(post|gallery)_[a-z]+(.+)","s":"$1gallery_enlarged\/gallery_enlarged$4","name":"Celebslam"},{"r":"([a-z0-9\\.]+(celebuzz|egotastic|idolator|socialitelife|thesuperficial|wwtdd)\\.com\/wp-content\/.+?)-(e[0-9]+-)?[0-9x]+\\.(jpe?g|png|gif)","s":"http:\/\/$1.$4","name":"Celebuzz\/Egotastic\/Idolator\/SocialiteLife\/Superficial\/WWTDD"},{"r":"chip\\.de\\\/.+grossbild","q":"img[alt]","name":"CHIP News"},{"d":"christianforums","e":"img[src*='avatars'], a.avatar > span","s":"var u = node.src || node.style.backgroundImage.match(\/[^()'\"]{10,}\/)[0]; return u.replace(\/avatars\\\/.\\\/\/, 'avatars\/l\/');","name":"Christian Forums"},{"d":"bugs.chromium.org","r":"(attachment.+?)&thumb=1","s":"$1","name":"Chromium Bugtracker"},{"r":"chronos\\.to\/t\/([0-9]+)\/([0-9]+)\/([a-z0-9]+)+","s":"http:\/\/i$1.chronos.to\/i\/$2\/$3.jpg","name":"chronos.to"},{"r":"cinespot\\.net\/gallery.+html","q":"#gsImageView img","name":"Cinespot"},{"r":"\/\/cl\\.ly\/[^\/]+$","q":"meta[property='og:image']","name":"cl.ly"},{"r":"com-magazin\\.de.+tx_cms_showpic","q":"img","name":"com! Magazin"},{"r":"coreimg\\.net\/t\/([0-9]+)\/([0-9]+)\/([a-z0-9]+)+","s":"http:\/\/i$1.coreimg.net\/i\/$2\/$3.jpg","name":"CoreIMG"},{"r":"(crazyimg\\.com\\\/images\\\/[^$]+.jpg).html","s":"http:\/\/$1","xhr":true,"name":"crazyimg.com"},{"d":"d3.ru","e":"img[data-src], a.b-preview_image","s":"return node.localName=='img' ? node.dataset.src : false","name":"d3.ru"},{"d":"donmai.us","e":"article > a > img","s":"return node.parentNode.parentNode.getAttribute('data-large-file-url');","name":"Danbooru"},{"d":"derpibooru.org","r":"\/img\/[0-9]+","s":"\/\\\/img\\\/\/\/img\/view\/\/","name":"Derpibooru"},{"r":"desan\\.gixx\\.ru","q":"#imagen > a > img","name":"Desan"},{"d":"deviantart.com","r":"deviantart\\.net\/.+?\/th\/","s":"return node.closest('[data-super-full-img]').dataset.superFullImg","name":"DeviantArt"},{"r":"directupload\\.net","q":".lupe","name":"Direct Upload"},{"r":"(s.pixogs.com\\\/image\\\/.-)([^\\-]+)-(.+-.+)","s":"http:\/\/$1$3","name":"Discogs"},{"r":"dofiga\\.net \/\\?image=[0-9]","q":"#image","name":"Dofiga"},{"r":"(img\\d+\\.douban\\.com\/)(?:(view\/)(?:photo|movie_poster_cover)\/(?!large)[^\/]+|(icon\/u(?=\\d))|[sm](?=pic\/))(.*)","s":"return 'http:\/\/' + m[1] + (m[2] ? m[2] + 'photo\/photo' : ((m[3]||'') + 'l')) + m[4];","name":"Douban"},{"r":"(www\\.dumppix\\.com\/images\/\\w+)_thumb\\.jpg","s":"http:\/\/$1.jpg","html":true,"xhr":true,"name":"DumpPix"},{"r":"e621\\.net\/post\/show\/","q":"div.content a[href*='\/data\/']","name":"e621"},{"r":"easyimghost\\.com\\\/ImageHosting\\\/","q":"img#img_obj","name":"EasyIMGHost"},{"r":"(images\\.encyclopediadramatica\\.es\/)thumb\/([a-z0-9]+\/[a-z0-9]+\/.+?\\.(jpe?g|gif|png|svg))","s":"http:\/\/$1$2","name":"Encyclopedia Damatica"},{"r":"extraimage\\.net","q":"#image-viewer-container","name":"ExtraImage"},{"r":"extraimago\\.com\/image\/","q":"a.btn:nth-child(1)","name":"ExtraImago"},{"r":"www\\.fansshare\\.com","q":"#mainimage","name":"fansshare"},{"d":"feedly.com","e":".visual, #floatingBar img, #feedlyPageHeader img","s":"return node.classList.contains('visual') && (m=node.style.backgroundImage.match(\/(http.+?)\"?\\)\/)) ? m[1] : ''","name":"Feedly"},{"r":"fitbamob.com\/(b|r\/[a-z]+)\/([0-9a-z]+)","s":"http:\/\/fitbamob.com\/api\/1.1\/video\/$2\/?mode=embed&format=json","q":"return JSON.parse(text).webm_url","name":"Fitbamob"},{"r":"forum\\.scanlover\\.com\/attachmentshow\\.php\\?attachmentid=\\d+&d=\\d+","q":"img#photo","name":"forum.scanlover.com (attachments)"},{"r":"foto-pic\\.net","q":"img","name":"Foto Pic"},{"d":"foursquare.com","e":"div.photoShadow, li.photo, img","s":"var url = node.src || (node.tagName == 'DIV' ? node.parentNode.parentNode : node).querySelector('img').src; return url.replace(\/[0-9]+x[0-9]+\/, 'original');","distinct":true,"name":"Foursquare"},{"r":"foxpix\\.org\/viewer.php","q":".text_align_center > a > img","name":"Fox Pix"},{"r":"www\\.freebunker\\.com","q":"#img_obj","xhr":true,"name":"FreeBunker"},{"r":"(freeimagepic\\.com\/)thumbs(\/\\w+\\.\\w+)","s":"http:\/\/$1images$2","name":"freeimagepic.com"},{"r":"gamespot\\.com\/pages\/image_viewer\/boxshot\\.php","q":".boxshot > img","name":"Gamespot box"},{"r":"(http:\/\/image\\.gamespotcdn\\.net\/.+)(gum|embed|thumb)(\\d+\\.jpg)","s":"$1screen$3","html":true,"name":"Gamespot screenshots"},{"d":"gearbest","e":".i_proImg > a, a.proImg_a","q":"return doc.querySelector('#js_jqzoom img').getAttribute('jqimg');","name":"GearBest (product grid)"},{"d":"gelbooru.com","r":"(gelbooru\\.com\/)thumbnails(\/.+\/)thumbnail_(.+?)\\.jpg","s":["http:\/\/$1images$2$3.webm","http:\/\/$1images$2$3.jpg","http:\/\/$1images$2$3.jpeg","http:\/\/$1images$2$3.png","http:\/\/$1images$2$3.gif"],"name":"Gelbooru"},{"r":"gifyu\\.com","s":"\/\\.th\/\/","name":"Gifyu"},{"d":"github.com","r":"(avatars.+?&s=)\\d+|(raw\\.github)(\\.com\/.+?\/img\/.+)$|\/(github)(\\.com\/.+?\/)blob\/([^\/]+\/.+?\\.(?:png|jpg|jpeg|bmp|gif|cur|ico))$","s":"return 'https:\/\/'+(m[1] ? m[1]+'460' : m[2] ? m[2]+'usercontent'+m[3] : 'raw.'+m[4]+'usercontent'+m[5]+m[6])","name":"Github (avatars and pictures in issues, wiki, etc.)"},{"d":"mail.google.com","e":"div.aLF-aPX-aPk-aMh img","s":"","name":"Google Mail (disable in attachment view)"},{"d":"play.google.com","e":".card-click-target","html":true,"r":"href=\"(.+?)\"","s":"$1","g":"rx=\/<img [^>]*?class=\"screenshot\"[^>]*?src=\"(.+?)\"\/g; g=[]; while(m=rx.exec(text)) g.push({url:m[1].replace(\/=h\\d+\/,'=h900')}); return g","name":"Google Play (App list icon: gallery of screenshots)"},{"d":"play.google.com","r":"(https?:\/\/lh\\d+\\.ggpht\\.com\/.+?)=h\\d+.*","s":"$1=h900","name":"Google Play (App page: screenshot)"},{"r":"[a-z0-9]+\\.mediaite\\.com\/gossipcop\/uploads\/","s":"return node.src.replace(\/thumbs\\\/thumbs_|-[0-9]+x[0-9]+\/, '');","name":"GossipCop"},{"r":"gravatar\\.com\/.+?([a-z0-9]{32})","s":"http:\/\/gravatar.com\/avatar\/$1?s=200","name":"Gravatar"},{"d":"greasyfork.org","r":"(\/forum\/uploads\/userpics\/.+?\/)n(.+)$","s":"$1p$2","name":"GreasyFork forum (avatars)"},{"r":"guyswithiphones\\.com\/[0-9]+\/[0-9]+\/[0-9]{3,}\/$","q":"#bigimg > img","name":"Guys With iPhones"},{"r":"\/\/(gyazo\\.com\/\\w{32,})","q":".image","xhr":true,"name":"Gyazo"},{"d":"hdwallpapers4you","r":"-[0-9]+\/","q":"a[href*='\/wallpaper\/']","c":"","name":"HD Wallpapers"},{"d":"heise.de","s":"if(node.hasAttribute('data-zoom-src')) return node.src.replace(\/\\\/imgs.+\/, node.getAttribute('data-zoom-src'))","name":"Heise Newsticker"},{"r":"hellokisses\\.com\/\\d+","q":"#indivPost-leftColumn img","name":"HelloKisses"},{"d":"hentai-foundry.com","r":"\/pictures\/user\/(.*?)\/(\\d+)\/([^\/]+)","s":"var u=`\/\/pictures.hentai-foundry.com\/${m[1][0].toLowerCase()}\/${m[1]}\/${m[2]}\/${m[1]}-${m[2]}-${m[3]}.`; return [u+'jpg', u+'png', u+'gif']","name":"hentai-foundry"},{"d":"hollywoodtuna.com","e":"p > a","r":"page_id=\\d+&id=","g":{"entry":"#mygallery .panel","image":"img","fix":"return s.replace(\/(\\images)(\\d+\\\/)\/,'$&bigimages$2')"},"name":"Hollywood Tuna (Thumbnails)"},{"d":"hollywoodtuna.com","r":"^(.+?\/images)(\\d*\/)(.+)$","s":"return m[1]+m[2]+'bigimages'+m[2]+m[3].replace('_small.','.')","name":"Hollywood Tuna (\"View all photos\" link, gallery mode)"},{"r":"hotimg\\.com\/image\/([a-z0-9]+)","s":"http:\/\/www.hotimg.com\/direct\/$1","name":"HotImg"},{"r":"img\\.hqclub\\.net","q":"#img_obj","name":"HQ Cub"},{"r":"(himg[0-9]+\\.huanqiu\\.com\\\/attachment.+?)thumb.*_(.+)","s":"http:\/\/$1$2","name":"Huanqiu"},{"r":"icezap\\.com","q":".centred_resized","name":"iceZap"},{"r":"(https:\/\/scontent\\.cdninstagram\\.com\/.+?\/)s\\d+x\\d+\/(.+)$","s":"$1$2","name":"Iconosquare"},{"r":"(idlebrain\\.com\/.*)images\/th_(.+)","s":"http:\/\/$1images\/$2","name":"idlebrain"},{"r":"(.+?idontlikeyouinthatway\\.com\/.+)(t\/|-banner)(.+)","s":"$1$3","name":"IDontLikeYouInThatWay"},{"r":"ign\\.com\/images\/","q":"#peekWindow > a","name":"IGN"},{"r":"image18\\.org\/show\/","q":"#picture","name":"Image18"},{"r":"(http:\/\/image2you\\.ru\/allimages\/)\\d_(_img_.+\\.(png|gif|jpe?g))","s":"$1$2","html":true,"name":"Image2You"},{"r":"(imagebanana.com)\\\/view\\\/(.+)","s":"http:\/\/i.$1\/img\/$2","name":"ImageBanana"},{"r":"imgcrl\\.org\/v\/([a-z0-9]+)","s":["http:\/\/cdn.imagecurl.org\/images\/$1.png","http:\/\/cdn.imagecurl.org\/images\/$1.jpg"],"xhr":true,"name":"ImageCurl"},{"r":"imagelike\\.org","q":"#fullsize > a","name":"ImageLike"},{"r":"imagesnake\\.com","q":"#img_obj","xhr":true,"name":"ImageSnake"},{"r":"img.pic","follow":true,"name":"imagetwist.com"},{"r":"imgbabes\\.com\/.+\\.html","q":"#this_image","xhr":true,"name":"IMG Babes"},{"r":"(.*.imgclick.net\/.*)_t(.*)","s":"$1$2","name":"imgclick.net"},{"r":"imgcredit\\.xyz","q":".centred","name":"imgCredit.xyz"},{"r":"(imgdino.com)(\/viewer.php\\?file=)([^\\\/]+).(jpe?g|gif|png)","q":"#cursor_lupa","xhr":true,"name":"ImgDino"},{"r":"imgextra\\.uk\/image\/","q":"a.btn:nth-child(1)","name":"imgExtra"},{"r":"(imgmade\\.com\/images\/\\d+\/\\d+\/\\w+)_tn(\\.\\w+)","s":"http:\/\/$1$2","name":"imgmade.com"},{"r":"(https?:\/\/imgmax.com\/images\/.+?)\\.[^.]+\\.jpg","s":"$1.jpg","name":"imgmax"},{"r":"imgprime\\.com","s":"\/small\/big\/","name":"ImgPrime"},{"r":"imgrobot\\.com\/images","s":"\/\\.md\\.jpg\/.jpg\/","name":"IMGRobot"},{"d":"imgrock\\.net\\\/[^$]+\\.html","r":"img.pic","follow":true,"name":"imgrock.net"},{"r":"imgsen\\.se","s":"\/small\/big\/","name":"IMGSEN.SE"},{"r":"www\\.imgshots\\.com","q":"#img_obj","xhr":true,"name":"Img Shots"},{"r":"imgshow\\.me\/images\/.+?\\.th\\.","s":"\/\\.th\\.\/.\/","name":"ImgShow"},{"r":"imgspot.org","s":"\/small\/big\/","name":"imgSpot.org"},{"r":"imgtag\\.ru","q":"img","name":"ImgTag"},{"r":"img\\.yt","s":"\/small\/big\/","name":"IMG.YT"},{"r":"(ipstatic\\.net\/)thumbs\/[0-9x]+(.+?)(_[0-9])?(\\..+)","s":"http:\/\/$1photos$2$4","name":"InterPals Penpals"},{"r":"ipic\\.lv\/galleries\/.+\\.html","q":"#gal_pic","name":"iPic"},{"r":"ipicture\\.ru\/Gallery\/viewfull\/\\d*\\.html","q":"#newImg","name":"iPicture"},{"r":"itrash\\.ru\/.*\\.(jpg|png)","q":"img.full","name":"iTrash"},{"d":"itunes.apple.com","e":"a,img,picture,.we-artwork__image","html":true,"r":"(\/\/is\\d+-ssl\\.mzstatic\\.com\/image\/thumb\/Music.+?)(\/source\/|\\.jpg\/|\\.png\/)(.+?)(\\.\\w+)","s":"$1$210000x0w.png","name":"iTunes.apple.com"},{"r":"jpegshare\\.net","q":"img","name":"JPEG Share"},{"r":"(http:\\\/\\\/.+justjared(jr)?\\.com\\\/wp-content\\\/uploads\\\/.+?\\\/)thumbs\\\/(.+)","s":"$1$3","name":"Just Jared"},{"r":"img\\.k236\\.net\/v\\.php","q":"img","name":"k236"},{"d":"kinopoisk.ru","r":"\/images\/(sm_film|film|poster)\/(?:sm_)?(\\d+)|\/im\/(poster)\/\\d+.+?\\d\\.jpg","s":"if(m[3]=='poster') return [node.src.replace(\/(\\kinopoisk.ru-).+?(-\\d+)(\\.jpg)\/,'$1$2--o--.jpg'),node.src.replace('.jpg','--o--.jpg')]; if(m[1]=='film' || m[1]=='sm_film') return [node.src.replace(m[1],'film_big'),node.src.replace(m[1],'film')]; u='http:\/\/st-im.kinopoisk.ru\/im\/poster\/'+m[2][0]+'\/'+m[2][1]+'\/'+m[2][2]+'\/kinopoisk.ru-'+escape(document.querySelector('meta[name=\"keywords\"]').content.match(\/.+? \\((.+?)\\)\/)[1].replace(\/\\s\/g,'-').replace(\/[^\\x20-\\x7F]\/g,function(m){return '_26_23'+m.charCodeAt(0)+'_3B'})).replace(\/[^a-zA-Z0-9\\-]\/g,'_')+'-'+m[2]; return [u+'--o--.jpg',u+'.jpg']","name":"KinoPoisk (posters)"},{"d":"kinopoisk.ru","e":"a","r":"\/film\/\\d+\/(posters|covers|fanart)","g":{"entry":"a[href*=\"\/picture\/\"]:not([title])","image":"img","fix":"if (!isURL) return s; m=s.match(\/(poster)\\\/(?:sm_)?(\\d+)\/); u='http:\/\/st-im.kinopoisk.ru\/im\/poster\/'+m[2][0]+'\/'+m[2][1]+'\/'+m[2][2]+'\/kinopoisk.ru-'+escape(document.querySelector('meta[name=\"keywords\"]').content.match(\/.+? \\((.+?)\\)\/)[1].replace(\/\\s\/g,'-').replace(\/[^\\x20-\\x7F]\/g,function(m){return '_26_23'+m.charCodeAt(0)+'_3B'})).replace(\/[^a-zA-Z0-9\\-]\/g,'_')+'-'+m[2]; return [u+'--o--.jpg',u+'.jpg']"},"name":"KinoPoisk (\"\u043f\u043e\u0441\u0442\u0435\u0440\u044b\" link, gallery mode)"},{"d":"knowyourmeme.com","r":"i\\d+(.kym-cdn.com\/[^\/]+\/[^\/]+\/).+?(\/\\d+.*)$","s":["http:\/\/i0$1original$2","http:\/\/i1$1original$2","http:\/\/i2$1original$2","http:\/\/i3$1original$2"],"name":"Know Your Meme (thumbnails)"},{"r":"konachan\\.(com|net)\/post\/show\/","q":"#image.image","xhr":true,"name":"Konachan"},{"d":".kouhi.me","e":"a.image","r":"data:image\/","s":"return node.href","q":".fullMedia a","html":true,"name":"Kouhi.me (mini thumbnails)"},{"d":".kouhi.me","r":"(.+?)\/thumb(\/.+?)\/[^\/]+$","s":"$1$2","name":"Kouhi.me (thumbnails)"},{"d":"letterboxd","e":"a.avatar, a#avatar-zoom","s":"\/\\\/film\\\/.+\/\/","q":"#avatar-large img","name":"Letterboxd avatars"},{"r":"prntscr\\.com\\\/(.+)","q":".image__pic","name":"Lightshot (1 of 2)"},{"r":"prnt\\.sc","q":"meta[name='twitter:image:src']","name":"Lightshot (2 of 2)"},{"r":"linkpic\\.ru\/(big\/)?[a-z0-9]+\/([a-z0-9]+\\.[a-z]+)\\.html.+?([a-z0-9]+\\.linkpic\\.ru\/\\d+\/\\d+\/)","s":"http:\/\/$3$2","html":true,"name":"Linkpic"},{"r":"lurkmore\\.to","q":"#file img","name":"Lurkmore"},{"r":"(luxpic\\.ru\/images\/[^$]+)_tn(\\.[^$]+)","s":"http:\/\/$1$2","name":"luxpic.ru"},{"r":"majorgeeks\\.com\/index\\.php","s":"\/thumb\/file\/","name":"MajorGeeks (for program screenshots)"},{"d":"mature-erotic.com","r":"(^.+?)=thumbs.+?\\\\(\\d+.+)","s":"$1=photos\\$2","name":"Mature Erotic"},{"r":"( src=\"|url\\()(http:\/\/photos[\\d]\\.meetupstatic\\.com[^\"]*)(thumb|member|global)(_[^\"]*\\.jpeg)","s":"$2highres$4","html":true,"name":"Meetup"},{"r":"(memegenerator\\.net\/instance)\/([0-9]+)","s":"http:\/\/images.$1s\/500x\/$2.jpg","name":"MemeGenerator"},{"d":"motherless.com","e":"*[data-mediatype='image'] > a","q":"return \/fileurl = .(.+?).;\/.exec(text)[1];","name":"Motherless"},{"r":"moviegalleri\\.net","s":"\/thumbs\\\/thumbs_\/\/","name":"Moviegalleri"},{"d":"myanimelist.net","e":"img,li[style*='.cdn-'] a,a.link-image,a[style*='.cdn-']","html":true,"r":"(\/\/[\\w.]+?cdn.+?\/.+?|\/\/myanimelist)(t|_thumb|)(\\.(?:png|jpe?g|webp|net\/.*))[\"')?]","s":"m1=m[1].replace(\/\\\/r\\\/\\d+x\\d+\/,''); hasLarge=(m1+m[3]).match('\/(anime|manga)\/'); return m[2]=='t' || hasLarge && !m[3].match('\/') ? [m1+'l'+m[3],m1+m[3]] : (node.src ? (m1+m[2]+m[3]).replace(\/_?thumbs?\\\/?\/g,'') : node.closest('[style*=\"cdn\"]').style.backgroundImage.replace(\/^.+?(\\\/{2}.+?)(\\.(?:jpe?g|webp)).*$\/,hasLarge ? '$1l$2' : '$1$2').replace(\/\\\/r\\\/\\d+x\\d+\/,''))","name":"MyAnimeList"},{"r":"mypict\\.org","q":"#fullim","name":"MyPict"},{"r":"mypix\\.me\/viewer.php","q":".page_body > div > div > a > img","name":"MyPix"},{"r":"mywed\\.ru(.+)?\\\/photo\\\/","q":".pict","name":"MyWed"},{"d":"rule34.paheal.net","r":"^(.+?\/)_thumbs.*","s":"return node.parentNode.href","q":"#main_image","name":"Paheal"},{"r":"(i\\d+\\.photobucket\\.com\/.+\/)th_([^\/]+\\.(?:png|jpg|jpeg))$","s":"http:\/\/$1$2","name":"Photobucket"},{"r":"photosight\\.ru\/photos","q":".bigphotobox","name":"Photosight"},{"r":"pic2net\\.ru\/view\/.*\\.(jpe?g|gif|png)","q":".preview > img","name":"pic2net"},{"r":"([a-z\\d]+\\.pic4you\\.ru\/allimage\/y[\\d\\\/-]+)-thumb(\\.[a-z]+)","s":"http:\/\/$1$2","html":true,"name":"pic4u"},{"r":"picbug\\.ru\/share-(.*)\\.html","s":"http:\/\/picbug.ru\/image-$1.jpg","name":"PicBug"},{"r":"piccsy\\.com\/\\d+\/\\d+","q":".p-picc img","name":"Piccsy"},{"r":"pic-games\\.ru","q":"img","name":"Pic Games"},{"r":"picimage\\.net\\\/i","q":"#wrapper > div > div > div > a > img","name":"PicImage"},{"r":"picplus\\.ru\/ful\/","s":"\/ful\/img\/","name":"PicPlus"},{"r":"picsave\\.org\/index\\.php\\?seite=display&img=([^$]+)","q":"#imageslink img","xhr":true,"name":"picsave.org"},{"r":"pzy.be\/t\/(.+)","s":"http:\/\/pzy.be\/i\/$1","xhr":true,"name":"PicsCrazy"},{"r":"picshd\\.com\/([a-z0-9]+)$","s":"http:\/\/i.picshd.com\/$1.jpg","name":"PicsHD"},{"r":"picstate\\.com\/view\/","q":"#image_container img","name":"PicState"},{"r":"pictube\\.ru\/\\?v.*","q":"#full_image","name":"PicTube"},{"r":"pikbox\\.ru\/view\\.php\\?filename=(.*)","s":"http:\/\/pikbox.ru\/images7\/$1","name":"Pikbox"},{"d":"pinterest.com","e":"img, .Pin *","s":"if (e=node.localName=='img' ? node : node.querySelector('img') || node.parentNode.querySelector('img') || node.parentNode.parentNode.querySelector('img')) { var u=e.src.replace(\/\\\/\\d+x\\d*\\\/\/,'\/736x\/').replace(\/(avatars.+?)_\\d+(\\.jpg)\/,'$1_140$2'); return [u, u.replace('\/736x\/','\/564x\/'), false] } return false","c":"return (e=node.parentNode.parentNode.querySelector('img')) && (e.alt.trim() != '') ? e.alt : false","name":"Pinterest"},{"r":"pixelmake\\.ru\/gallery\/photo\/full\/\\?idPhoto=(.*)","s":"http:\/\/pixelmake.ru\/uploads\/full\/$1.jpg","name":"PixelMake"},{"r":"pixelup\\.net\/image","q":"center img","name":"PixelUp"},{"r":"pixiv\\.net\/.+illust_id=([0-9]+)","q":"return text.match(\/http:\\\/\\\/i[0-9]+\\.pixiv\\.net\\\/img[0-9]+\\\/img\\\/.+?\\\/[0-9]+_m\\.[a-z]+\/i)[0].replace('_m', '');","name":"Pixiv"},{"d":"pixiv.net","e":".works_display > a[href*='mode=big'],._layout-thumbnail","s":"return node.querySelector('img').src","follow":true,"name":"Pixiv (art page 1, requires common art page rule)"},{"d":"pixiv.net","s":"return node.href","e":"a.work, .sibling-items a, img","r":"\/img-inf\/","q":".works_display img","html":true,"follow":true,"name":"Pixiv (art page 2, requires common art page rule)"},{"d":"pixiv.net","r":"(i\\d*\\.pixiv\\.net\/.*?)(?:_m|\\w+\/[\\dx]+\/img-master\/|mobile\/|)(\\.[^.\/]+|img\\d*\/.+?|\\d+)(_(?:(?:p0_)?master|square).*|_\\d+(?:mw)?|)(\\.(?:jpg|jpeg|png|gif).*?|)$","s":"function exts(u){u=u.replace(\/_m|_\\d+x\\d+$\/,'');return[u+'_p0.png',u+'_p0.jpg',u+'.png',u+'.jpg',u+'_m.jpg',false]} if(m[0].indexOf('\/mobile\/')>-1)return exts('http:\/\/'+m[0].replace(\/mobile\\\/(\\d+)_.*\/,'$1')); if(m[0].indexOf('img-master')>-1)return exts('http:\/\/'+m[1]+'img-original\/'+m[2]); a=node.parentNode; if(!a.href)a=a.parentNode; u='http:\/\/'+m[1]+m[2]; return a.href && a.href.match(\/mode=manga\/) ? false : [u.replace(\/_m$\/,'')+m[4]].concat(exts(u))","name":"Pixiv (common art page rule, required by art page rules 1 and 2)"},{"d":"pixiv.net","e":"a.multiple","q":"e=doc.querySelector('.works_display img'); if(!e)return false; u=e.src; r=\/\\\/\\w+\\\/[\\dx]+\\\/img-master(\\\/img\\\/.+?)_(?:master|square).*?$\/; if(!r.test(u))return u; u=u.replace(r,'\/img-original$1'); return [u+'.jpg',u+'.png']","name":"Pixiv (main page 1)"},{"d":"pixiv.net","e":".works_display > a[href*='mode=manga']","g":"r=\/\\\/\\w+\\\/[\\dx]+\\\/img-master(\\\/img\\\/.+?)_(?:master|square).*?$\/; function geturl(t) {if(!r.test(t))return t; u=t.replace(r,'\/img-original$1'); return [u+'.png',u+'.jpg']} if(text.indexOf('\"item-container\"')>0) {doc=createDoc(text); g=[{url:geturl(n.getAttribute('data-src'))} for (n of doc.querySelectorAll('.item-container img'))]; g.title=doc.title; return g} else {g=[]; text.replace(\/originalImages\\[.+?=\\s*\"(.+?)\"\/g,function(m,s1){g.push({url:geturl(s1.replace('\\\\',''))})}); m=text.match(\/<title.*?>(.+?)<\\\/title>\/); if(m)g.title=m[1]; return g}","name":"Pixiv (manga\/multi-image gallery mode)"},{"d":"pixiv.","e":"a[href*='\/spotlight\/']","g":{"entry":"a.work","image":"img","fix":"if(isURL){var u=s.replace(\/mobile\\\/(.+?)_.+?(\\.[^.]+)\/,'$1$2');return [u,u.replace('.jpg','.png'),s]}else return s","caption":"h1","title":"meta[property='og:title']"},"name":"Pixiv (spotlight gallery mode)"},{"r":"pixs\\.ru\/showimage\/.*","q":"#imgg","name":"Pixs"},{"r":"(www\\.)?pixsense\\.net\\\/site\\\/v\\\/.+","q":"a[href][style=\"float:left\"]","xhr":true,"name":"pixsense.net"},{"r":"pixxxels\\.org","q":"a.btn:nth-child(2)","name":"PIXXXels.org"},{"r":"(popoholic\\.com\/)(images2?\/.+)","s":"http:\/\/$1big$2","name":"Popoholic"},{"r":"postimg\\.org","q":"a.btn:nth-child(2)","name":"postimg.org"},{"r":"powerlogo\\.ru\/show-image.php","q":".content-container > center > img","name":"Powerlogo"},{"d":"publicfeet.com","e":"a > div.pvbox","s":"return 'http:\/\/www.publicfeet.com\/photos\/' + \/[0-9]+\/.exec(node.style.backgroundImage) + '.jpg';","name":"PublicFeet"},{"r":"raagalahari\\.com","s":"\/t\\.jp\/.jp\/","name":"Raagalahari"},{"r":"rarbg.to","q":"table.lista:nth-child(2)","name":"rarbg.to - display THUMBNAIL on mouseover."},{"d":"reddit.com","r":"reddit\\.com\/r\/.+\/comments\/.+","s":"if ((node.classList.contains('title') || node.classList.contains('thumbnail')) && ( node.parentNode.querySelector('span.domain a').href.indexOf('\/domain\/i.redd.it\/') !== -1) || ( node.parentNode.querySelector('span.domain a').href.indexOf('\/domain\/i.reddituploads.com\/') !== -1) ) return node.href; else return '';","q":"div.media-preview-content a","name":"reddit upload image links"},{"d":"rottentomatoes","e":"#poster_link img, .media img, img + div.filter","s":"return (node.src ? node : node.previousElementSibling).src.replace(\/resizing.flixster.com\\\/unsafe\\\/[0-9x]+\\\/\/, '').replace(\/_tmb|_det\/, '_ori')","name":"Rotten Tomatoes"},{"r":"(photo\\.rukes\\.com\/.+\/)thumbs(\/.+)","s":"http:\/\/$1slides$2","name":"Rukes"},{"r":"photo\\.rukes\\.com\/\\w+\/\\w+\\.html","g":{"title":"h1","entry":"td.indexThumbnail","image":"img","fix":"return s.replace('thumbs', 'slides');"},"name":"Rukes (gallery mode)"},{"d":"rule34.xxx","r":"^(.+?\/)thumbnails(.+?\/)thumbnail_(.+?)\\.jpg","s":["$1images$2$3.webm","$1images$2$3.jpg","$1images$2$3.jpeg","$1images$2$3.png","$1images$2$3.gif"],"name":"Rule34"},{"r":"rupic\\.org","q":"#imagen > a > img","name":"RuPic"},{"d":"ruthe.de","e":"#archiv_inner img, #cont_thumbs img","s":"\/tn_\/\/","name":"Ruthe Cartoons"},{"r":"chan\\.sankakucomplex\\.com\/post\/show\/","q":"#image","xhr":true,"name":"Sankaku Channel"},{"r":"savepic\\.(ru|su|net)\/.*\\.htm","q":".b-picture img","name":"SavePic"},{"r":"screencast\\.com\/t\/\\S+","q":"img.embeddedObject","name":"Screencast"},{"r":"scrin\\.org","q":"img","name":"Scrin"},{"d":"sex.com","r":"sex\\.com\/.+?\/.+?\/$","g":{"entry":".small_pin_box","image":".image","fix":"return s.replace(\/\\\/(236|30x30|60x60|126x126|216x162)\\\/\/,'\/620\/')","title":"title"},"name":"Sex.com (board link gallery mode)"},{"d":"sex.com","r":"(^.*?images\\.sex\\.com.+?)\/(?:236|300|30x30|60x60|126x126|216x162)\/(.+)","s":"$1\/620\/$2","name":"Sex.com (thumbnails)"},{"r":"sheposes\\.com\/\\w+\/\\d+","q":".content a img","name":"ShePoses"},{"d":"shutterstock.com","e":"[data-highresolution], .img-wrap img, .overlay a","s":"if (node.href) node=node.closest('li').querySelector('[data-highresolution], .img-wrap img'); return !node ? '' : node.localName=='img' ? node.src.replace(\/\\\/\\\/thumb\\d+(\\.shutterstock\\.com)(\\\/[^\\\/]+){3}(.+)$\/, '\/\/image$1\/z$3') : node.dataset.highresolution","name":"shutterstock search"},{"r":"skrinshot\\.ru\/view\\.php\\?img=(\\d+)","s":"http:\/\/skrinshot.ru\/files\/$1.jpg","name":"Skrinshot"},{"d":"smugmug.com","r":"(smugmug\\.com\/.+?\/)([SMLX]|Ti)(\/.+?-)\\2(\\.[^.]+)","s":"$1X2$3X2$4","name":"SmugMug"},{"r":"someimage\\.com\/[a-z0-9]+$","q":"img#viewimage","xhr":true,"name":"SomeImage"},{"d":"soundcloud.com","e":"a,img,.image__full","html":true,"r":"(\/\/i\\d+\\.sndcdn\\.com\/.+?-)t\\d+x\\d+(\\.\\w+)","s":["$1original.jpg","$1original.png","$1original.gif"],"name":"SoundCloud"},{"r":"(cdn[0-9]+\\.spiegel\\.de\/images\/image-[0-9]+)","s":"http:\/\/$1-galleryV9-egni.jpg","name":"Spiegel Online"},{"r":"ss\\.movierls\\.net\/image\/\\w+$","q":"link[rel=\"image_src\"]","xhr":true,"name":"ss.movierls.net"},{"r":"stillpics\\.net\\\/image","q":"#theimage","xhr":true,"name":"StillPics"},{"d":"stocktwits.com","r":"stream_\\d+","s":"\/stream\/original\/","name":"StockTwits"},{"r":"subefotos.com\/ver\/\\?([a-z0-9\\.]+)","s":"http:\/\/fotos.subefotos.com\/$1","name":"Subefotos"},{"r":"swagirl\\.com\/host\/view","q":"img.img_full_screen","name":"Swagirl"},{"r":"\/\/take.ms\/[^\/]+$","name":"Take.ms"},{"r":"((?:img\\d\\d\\.taobaocdn|g(?:[^.]*\\.?){1,2}?\\.alicdn)\\.com\\\/)(?:img\\\/|tps\\\/http:\\\/\\\/img\\d\\d+\\.taobaocdn\\.com\\\/)?((?:imgextra|bao\\\/uploaded)\\\/i\\d+\\\/[^!]+![^.]+\\.[^_]+)_.+","s":"http:\/\/$1$2","name":"Taobao"},{"d":"tehparadox","e":"a[id^='thread_title_']","g":{"image":"div.post img.tcattdimgresizer"},"name":"tehPARADOX (thread list, gallery mode)"},{"d":"telugutvstars.co.in","r":"^(.+?\/(?:galleries|uploads).+?\/?)(?:thumbs\/thumbs_|-\\d+x\\d+)(.+)$","s":"$1$2","name":"Telug TV Stars"},{"d":"topit.me","e":"img","r":"topit\\.me\/(m\\d*\/.+|.*?m\\.jpg$)","s":"u=[]; function both(pat,rep){if(node.src.match(pat))return u.push(node.src.replace(pat,rep),node.src.replace(pat,rep.replace('o','l')))} return both('\/m\/','\/o\/')||both('\/m','\/o')||both('m.','o.') ? u : false","name":"Topit"},{"d":"trackitdown.net","r":"(\/\/.+?cloudfront\\.net\/graphics\/.+?)__","s":"$1_original.jpg","name":"Trackitdown"},{"r":"(trumbhost\\.com\\\/images\\\/\\d+\\\/\\d+\\\/\\w+)_tn(\\.[^$]+)","s":"http:\/\/$1$2","xhr":true,"name":"trumbhost.com"},{"r":"twinpix\\.nu\/gallery\/photo\/","q":"#RIGHT > center > img","name":"Twinpix"},{"d":"twitter.com","e":"div.gif-play-pause","s":"var bg = node.parentNode.querySelector('.poster-image').style.backgroundImage,url = \/http[^\\\")]+\/.exec(bg)[0];if (url.indexOf('.jpg') == -1){return url.replace('_thumb', '').replace('.png', '.mp4');} else {return url.replace('_thumb', '').replace('.jpg', '.mp4');}","name":"Twitter GIFs"},{"r":"uploadimagex\\.com","q":"img","name":"UploadImageX"},{"r":"(up\\.sexfv\\.com\/image\\.php\\?d)m(=\\w+)","s":"http:\/\/$1i$2","name":"up.sexfv.com"},{"r":"userstyles\\.org\/styles\/\\d+\/","q":"a[title]","name":"Userstyles.org"},{"d":"userstyles.org","r":"(\/\/.+?style_screenshot)(?:_thumbnail|)(s\/.*?)(?:-thumbnail|)(\\..+)","s":"$1$2$3","name":"Userstyles.org (search results)"},{"r":"(vavvi\\.com\/images\/\\d+\/\\d+\/\\w+)_tn(\\.\\w+)","s":"http:\/\/$1$2","name":"vavvi.com"},{"r":"vidble.com\\\/album\\\/([a-zA-Z0-9]+)","q":"#ContentPlaceHolder1_divContent center img","name":"Vidble (single picture)"},{"r":"userapi\\.com\\\/u(\\d+)\\\/e_","s":"http:\/\/vk.com\/id$1","html":true,"q":"#page_avatar img","name":"VK (Avatars)"},{"d":"vk.com","r":"vk\\.me\/.+?\\.jpg","s":"return (m=node.parentNode.outerHTML.replace(\/&quot;\/g,'').match(\/(http.+?),.+?,z_:\\[(.+?),\/)) ? m[1]+m[2]+'.jpg' : (e=document.querySelector('#pv_open_original')) ? e.href : false","name":"VK (Photos)"},{"r":"wallbase\\.cc\/wallpaper\/","q":"img.wall","name":"Wallbase"},{"d":"wallhaven.cc","r":"\/wallpaper\/\\d+$","s":"img=node.querySelector('img') || node.parentNode.querySelector('img'); if (!img) return ''; src=img.src.replace('thumb\/small\/th-','full\/wallhaven-'); return [src,src.replace('.jpg','.png')]","name":"Wallhaven"},{"r":"(ww[0-9]\\.sinaimg\\.cn)\/(thumbnail|square)\/([a-z0-9]+)","s":"http:\/\/$1\/mw1024\/$3.jpg","name":"Weibo"},{"r":"wikimapia\\.org\\\/showphoto","q":"#photoshow_image","name":"WikiMapia"},{"r":"wikimedia\\.org\/wiki\/File","q":".fullImageLink a","follow":true,"name":"Wikimedia (file links)"},{"r":"(upload\\.wikimedia\\.org\/wikipedia\/commons\/thumb.+?)-\\d+px-(.+)","s":"https:\/\/$1-1920px-$2","name":"Wikimedia (thumbnails)"},{"r":"wikipedia\\.org\/wiki\/","q":"return (e=doc.querySelector('.thumb img')||doc.querySelector('img'))?e.src:false","follow":true,"name":"Wikipedia (ALL links)"},{"r":"https?:\\\/\\\/ept\\.xhcdn\\.com\\\/([0-9]+)\\\/([0-9]+)\\\/([0-9]+)\\\/([a-z0-9]+)_[0-9]+.jpg","s":"https:\/\/ep2.xhcdn.com\/$1\/$2\/$3\/$4_1000.jpg","name":"xhamster galleries"},{"r":"(xxx\\.freeimage\\.us\/)[a-z]+(\\.php\\?id=\\w+)","s":"http:\/\/$1image$2","name":"XXX FreeImage"},{"r":"yande\\.re\/post\/show\/","q":"#highres","name":"yande.re"},{"d":"yande.re","e":"a.thumb","r":"\/preview\/","s":"return node.href","q":"e=doc.querySelector('#image'); if(!e)return false; u=e.src.replace('\/sample\/','\/image\/'); return [u,u.replace('.jpg','.png')]","html":true,"name":"yande.re (small thumbnails)"},{"r":"(img)\\d*(-fotki\\.yandex\\.)(?:ru|net)(\/get\/.+?\/.+?\/.+?_)(?:STATIC|)(.+?)_(?:-\\d+-|)(L|S|XS|XXS|XXXS)\\d*","s":["http:\/\/$1$2ru$3$4_orig","http:\/\/$1$2ru$3$4_XXXL","http:\/\/$1$2ru$3$4_XXL","http:\/\/$1$2ru$3$4_XL"],"name":"Yandex Fotki"},{"r":"yandex\\.ru\/yandsearch.+rpt=simage|\\.(jpe?g|gif|png)$","s":"return node.className.indexOf('b-images-item__link') < 0 ? false : node.href + '&nojs=1';","q":".b-duplicate__size a","name":"Yandex Image Search"},{"d":"market.yandex.","r":"&size=","s":"return node.closest('a')","q":".product-card-gallery__image img","name":"Yandex Market"},{"r":"mdata\\.yandex\\.net\/","name":"Yandex Market"},{"r":"you-logo\\.ru\/thumbnails\/","s":"\/thumbnails\/pictures\/","name":"You-Logo"},{"r":"youpic\\.su\\\/view.php","q":"#img_view","name":"Youpic"},{"e":"img,a,iframe","r":"(youtu\\.be\/.+|(?:youtube\\.com|\")\/(?:watch[?\/&]|embed\/).+)|i\\d*\\.ytimg\\.com\/vi\/","s":"if (node.localName=='iframe') return node.src.replace('\/embed\/','\/watch?v='); while (node && (node.localName!='a')) node=node.parentNode; return node.href","q":"var r=\/quality=.+?url=([^=]+?mime%3Dvideo%252F(?:mp4|webm)[^=]+?)(?:,quality|,itag|.u0026)\/g, u=[]; while(m=r.exec(text)) u.push(decodeURIComponent(decodeURIComponent(m[1]))+'&.mp4'); return u","html":true,"name":"YouTube (HTML5 video)"},{"r":"(youtu\\.be\/|youtube\\.(googleapis\\.)?com\/(watch.+?v=|v\/))([a-z0-9_-]+)","s":"https:\/\/img.youtube.com\/vi\/$4\/0.jpg","name":"YouTube (preview image)"},{"r":"(res\\.yyets\\.com\\\/ftp\\\/\\d+\\\/\\d+)\\\/[ms]_(.*)","s":"http:\/\/$1\/$2","name":"YYets"},{"r":"(www.+zimbio\\.com\\\/.+)[a-z](\\.jpg)","s":"http:\/\/$1x$2","html":true,"name":"Zimbio"}];
			function getRule(idx) {
				var rule = JSON.parse(JSON.stringify(rules[idx]));
				delete rule.name;
				return JSON.stringify(rule);
			}
			function getRefDomain() {
				var m = /\/\/([^\/]+)/.exec(document.referrer.toLowerCase());
				if(!m) return;
				var parts = m[1].split('.'), main = parts[0];
				if(parts.length > 2 && parts[1].length > 3) main = parts[1];
				return {fqdn:m[1], main:main};
			}
			function makeForm() {
				var s = document.createElement('select'), domain = getRefDomain();
				for(var i = 0, len = rules.length, rule; i < len && (rule = rules[i]); i++) {
					var o = document.createElement('option');
					o.textContent = rule.name;
					o.value = i;
					if(domain && (rule.name.toLowerCase().indexOf(domain.main) > -1 || rule.d && domain.fqdn.indexOf(rule.d.toLowerCase()) > -1)) o.selected = true;
					s.appendChild(o);
				}
				var b = document.createElement('button');
				b.textContent = 'Install';
				b.addEventListener('click', onButton);
				var div = document.createElement('div');
				div.appendChild(s);
				div.appendChild(b);
				return div;
			}
			function makeTable() {
				var tab = document.createElement('table');
				var temp = document.createElement('tr');
				temp.innerHTML = '<td></td><td><code></code></td>';
				for(var i = 0, len = rules.length, rule; i < len && (rule = rules[i]); i++) {
					var tr = temp.cloneNode(true);
					tr.children[0].textContent = rule.name;
					tr.children[1].children[0].textContent = getRule(i);
					tab.appendChild(tr);
				}
				return tab;
			}
			function onLoaded() {
				var framed = window.parent != window;
				if(framed) document.body.className = 'framed';
				document.body.appendChild(framed ? makeForm() : makeTable());
			}
			function onButton() {
				var idx = document.querySelector('select').value;
				window.parent.postMessage('mpiv-rule ' + getRule(idx), '*');
			}
			document.addEventListener('DOMContentLoaded', onLoaded, false);
		</script>
	</head>
	<body>
		<noscript>This feature requires JavaScript.</noscript>
	</body>
</html>
